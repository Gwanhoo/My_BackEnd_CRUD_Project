<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>스터디룸 생성 - 코사모</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/output.css?v=<%= Date.now() %>">

  <!-- Tailwind / DaisyUI CSS 불러오는 부분 (네 프로젝트 기준으로 맞춰서) -->
  <!-- 예: <link rel="stylesheet" href="/css/output.css" /> -->
</head>
<body class="bg-gray-50 text-gray-800">

  <!-- 상단 네브바 (기존 거 include 쓰면 여기 대신 include 써도 됨) -->
  <header class="bg-white/80 backdrop-blur border-b border-gray-200">
    <nav class="max-w-5xl mx-auto flex items-center justify-between px-4 py-3">
      <a href="/" class="text-xl font-bold text-blue-600 hover:text-blue-700">코사모</a>
      <div class="flex items-center gap-3">
        <% if (!isLogin) { %>
          <a href="/login" class="link">로그인</a>
          <a href="/register" class="btn btn-primary">회원가입</a>
        <% } else { %>
          <a href="/write" class="btn btn-ghost">글쓰기</a>
          <a href="/studyroom/new" class="btn btn-ghost">스터디룸 생성</a>
          <!-- 필요하면 목록 버튼도 -->
          <!-- <a href="/studyroom/list" class="btn btn-ghost">스터디룸 목록</a> -->
          <a href="/mypage" class="btn btn-primary"><%= user.username %> 마이페이지</a>
          <a href="/logout" class="btn bg-red-600 text-white hover:bg-red-700">로그아웃</a>
        <% } %>
      </div>
    </nav>
  </header>

  <!-- 메인 컨테이너 -->
  <main class="max-w-5xl mx-auto px-4 py-8">

    <!-- 상단 제목/설명 -->
    <section class="mb-8">
      <h1 class="text-2xl font-bold mb-2">새 스터디룸 만들기</h1>
      <p class="text-gray-600 text-sm">
        함께 공부할 사람들을 초대할 스터디룸을 생성합니다.<br />
        스터디룸 이름과 간단한 소개를 적어주세요.
      </p>
    </section>

    <!-- 에러 메시지 -->
    <% if (error) { %>
      <div class="mb-4 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700">
        <%= error %>
      </div>
    <% } %>

    <!-- 카드 형태의 폼 -->
    <section class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
      <form action="/studyroom/new" method="POST" class="space-y-5">

        <!-- 스터디룸 이름 -->
        <div>
          <label for="title" class="block text-sm font-medium text-gray-700 mb-1">
            스터디룸 이름 <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="title"
            name="title"
            required
            placeholder="예) Node.js 백엔드 스터디"
            class="w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            value="<%= typeof title !== 'undefined' ? title : '' %>"
          />
          <p class="mt-1 text-xs text-gray-500">
            나중에 스터디룸 목록/화면에 표시되는 이름입니다.
          </p>
        </div>

        <!-- 스터디룸 소개 -->
        <div>
          <label for="description" class="block text-sm font-medium text-gray-700 mb-1">
            스터디룸 소개
          </label>
          <textarea
            id="description"
            name="description"
            rows="4"
            placeholder="예) 코딩애플 Node.js 강의 들으면서 백엔드 위주로 공부하는 방입니다."
            class="w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"
          ><%= typeof description !== 'undefined' ? description : '' %></textarea>
          <p class="mt-1 text-xs text-gray-500">
            선택항목이지만, 다른 사람들이 들어올 때 분위기를 알 수 있게 간단히 적어주는 걸 추천해요.
          </p>
        </div>

        <!-- 최대 인원 수 -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label for="maxMembers" class="block text-sm font-medium text-gray-700 mb-1">
              최대 인원 수
            </label>
            <input
              type="number"
              id="maxMembers"
              name="maxMembers"
              min="2"
              max="50"
              value="<%= typeof maxMembers !== 'undefined' ? maxMembers : 10 %>"
              class="w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            />
            <p class="mt-1 text-xs text-gray-500">
              기본값은 10명입니다. 너무 많으면 채팅방이 복잡해질 수 있어요.
            </p>
          </div>

          <!-- 공개 여부 -->
          <div>
            <span class="block text-sm font-medium text-gray-700 mb-1">
              공개 설정
            </span>
            <label class="inline-flex items-center mt-1 cursor-pointer select-none">
              <input
                type="checkbox"
                name="isPublic"
                class="mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                <%= typeof isPublic !== 'undefined' ? (isPublic ? 'checked' : '') : 'checked' %>
              />
              <span class="text-sm text-gray-700">
                공개 스터디룸 (목록에서 누구나 볼 수 있음)
              </span>
            </label>
            <p class="mt-1 text-xs text-gray-500">
              비공개로 만들면 초대를 받은 사람만 입장할 수 있게 만들 수도 있습니다. (나중에 초대 기능 연동)
            </p>
          </div>
        </div>

        <!-- 버튼 영역 -->
        <div class="flex items-center justify-end gap-3 pt-4 border-t border-gray-100">
          <a href="/" class="btn btn-ghost text-sm">
            취소
          </a>
          <button type="submit" class="btn btn-primary text-sm">
            스터디룸 생성하기
          </button>
        </div>

      </form>
    </section>

  </main>
</body>
</html>
